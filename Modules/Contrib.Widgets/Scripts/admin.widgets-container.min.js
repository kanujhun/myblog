var WidgetsContainer;(function(){$(function(){var t=[],n;$(".add-widget").on("click",function(n){n.preventDefault();var r=$(this).data("host-id"),t=$(this).parents("form:first"),u=$(this).parents("fieldset:first"),f=u.find("input[name='submit.Save']"),i=$(this).attr("href");r===0?t.attr("action",i):(f.val("submit.Save"),$("input[type='hidden'][name='returnUrl']").val(i)),t.submit()});$("div.widgets").on("click","a.remove-widget",function(i){if(i.preventDefault(),confirm($(this).data("confirm"))){var r=$(this).parents("li:first"),u=r.data("widget-id");r.remove(),t.push(u),$("input[name='removedWidgets']").val(JSON.stringify(t)),n()}});n=function(){var i=$("input[name='widgetPlacement']"),n={zones:{}},t;$("div.widgets ul.widgets").each(function(){var t=$(this).data("zone");n.zones[t]={widgets:[]},$(this).find("li").each(function(){var i=$(this).data("widget-id");n.zones[t].widgets.push(i)})}),t=JSON.stringify(n),i.val(t)},$("div.widgets ul.widgets").sortable({connectWith:"div.widgets ul.widgets",dropOnEmpty:!0,placeholder:"sortable-placeholder",receive:function(){n()},update:function(){n()}}),$("#widgetsPlacement legend").expandoControl(function(n){return n.nextAll(".expando")},{collapse:!0,remember:!0})})})(WidgetsContainer||(WidgetsContainer={}))